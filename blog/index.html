<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog — Notebooks</title>
  <link rel="stylesheet" href="/profile-site/assets/css/style.css">
  <style>
    .embed-wrap{max-width:1100px;margin:2rem auto;padding:1rem}
    .embed-header{display:flex;align-items:center;justify-content:space-between}
    .embed-frame{width:100%;height:75vh;border:1px solid rgba(0,0,0,0.08);border-radius:12px;background:#fff;overflow:auto}
    .back-link{color:#0b6ef6;text-decoration:none}
  </style>
</head>
<body>
  <nav class="topnav">
    <div class="container nav-container">
      <a class="brand" href="/profile-site/">M. Elsherbiny</a>
      <a class="link back-link" href="../index.html">← Back to home</a>
    </div>
  </nav>

  <main class="embed-wrap">
    <div class="embed-header" style="background-image:url('../assets/images/autonums vehicle.png');background-size:cover;padding:1rem;border-radius:8px;color:#fff;">
      <h1>Notebook Blog</h1>
      <p class="muted">Converted notebooks appear below</p>
    </div>

    <div class="embed-frame" id="embed-frame">
      <div id="loader" style="padding:2rem;text-align:center;color:#333">Loading notebooks…</div>
    </div>

    <p class="muted small" id="fallback-msg" style="margin-top:.75rem;display:none">If the content doesn't appear, generate the site with the converter script or open <a href="site/index.html">the generated index</a>.</p>
  </main>

  <script>
    // Load generated index.html and inject into the embed frame. Intercept notebook links to fetch their pages.
    (function(){
      const frame = document.getElementById('embed-frame');
      const loader = document.getElementById('loader');
      const fallback = document.getElementById('fallback-msg');

      function showError(msg){ loader.textContent = msg; fallback.style.display = 'block'; }

      fetch('site/index.html').then(r=>{
        if(!r.ok) throw new Error('Generated index not found');
        return r.text();
      }).then(html=>{
        // insert HTML and wire up links
        frame.innerHTML = html;

        // Make links load inside the frame
        frame.querySelectorAll('a').forEach(a=>{
          const href = a.getAttribute('href');
          if(href && href.endsWith('.html')){
            a.addEventListener('click', function(e){
              e.preventDefault();
              loadNotebook(href);
            });
          }
        });
      }).catch(err=>{
        console.warn(err);
        showError('Could not load generated notebooks.');
      });

      function loadNotebook(page){
        loader.textContent = 'Loading ' + page + '...';
        fetch('site/' + page).then(r=>{
          if(!r.ok) throw new Error('Notebook not found');
          return r.text();
        }).then(html=>{
          // replace frame content with notebook HTML wrapped
          frame.innerHTML = '<div style="padding:1rem"><a href="#" id="back-to-list">← Back to list</a></div>' + html;
          document.getElementById('back-to-list').addEventListener('click', function(e){ e.preventDefault(); location.reload(); });
        }).catch(err=>{
          console.warn(err);
          showError('Could not load notebook: ' + page);
        });
      }
    })();
  </script>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="muted">© <span id="year">2025</span> Mohamed Elsherbiny</p>
    </div>
  </footer>

  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
